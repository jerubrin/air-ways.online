name: Test Build

on:
  pull_request:
    branches: [ "**" ]
    types: [opened, synchronize, closed, reopened]
  pull_request_review:
    types: [created, edited, dismissed, submitted]
  issue_comment:
    types: [created]

jobs:
  notification:
    name: "PR tg notification"
    runs-on: ubuntu-latest
    steps:
      # Pull Requests
      - name: "Create Pull Request"
        if: (github.event_name == 'pull_request' && github.event.action == 'opened')
        uses: "appleboy/telegram-action@master"
        with:
          to: ${{ secrets.TELEGRAM_ID }}
          token: ${{ secrets.TELEGRAM_TOKEN }}
          format: HTML
          message: |
            âš«ï¸ <b>${{ github.repository }}</b> âš«ï¸

            ğŸ‘¤ <u><b>${{ github.actor }}</b></u> ÑĞ¾Ğ·Ğ´Ğ°Ğ» â¤´ï¸<i>Pull Request</i>
            <code>"${{ github.event.pull_request.title }}"</code>
            Ğ¸Ğ· Ğ²ĞµÑ‚ĞºĞ¸ <code>${{ github.head_ref }}</code> Ğ² Ğ²ĞµÑ‚ĞºÑƒ <code>${{ github.base_ref }}</code>.

            ğŸŸ¦ <a href="${{ github.event.pull_request.html_url }}">link...</a>
      - name: "Commit to Pull Request"
        if: (github.event_name == 'pull_request' && github.event.action == 'synchronize')
        uses: "appleboy/telegram-action@master"
        with:
          to: ${{ secrets.TELEGRAM_ID }}
          token: ${{ secrets.TELEGRAM_TOKEN }}
          format: HTML
          message: |
            âš«ï¸ <b>${{ github.repository }}</b> âš«ï¸

            ğŸ‘¤ <u><b>${{ github.actor }}</b></u> Ğ´Ğ¾Ğ±Ğ°Ğ²Ğ¸Ğ» ğŸ”˜<i>commit</i> Ğ² â¤´ï¸<i>Pull Request</i>
            <code>"${{ github.event.pull_request.title }}"</code>.
            Ğ¸Ğ· Ğ²ĞµÑ‚ĞºĞ¸ <code>${{ github.head_ref }}</code> Ğ² Ğ²ĞµÑ‚ĞºÑƒ <code>${{ github.base_ref }}</code>.

            ğŸŸ¦ <a href="${{ github.event.pull_request.html_url }}">link...</a>
      - name: "Merged Pull Request"
        if: (github.event_name == 'pull_request' && github.event.action == 'closed' && github.event.pull_request.merged == true)
        uses: "appleboy/telegram-action@master"
        with:
          to: ${{ secrets.TELEGRAM_ID }}
          token: ${{ secrets.TELEGRAM_TOKEN }}
          format: HTML
          message: |
            âš«ï¸ <b>${{ github.repository }}</b> âš«ï¸

            ğŸ‘¤ <u><b>${{ github.actor }}</b></u> Ğ·Ğ°Ğ¼ĞµÑ€Ğ¶Ğ¸Ğ» â¤´ï¸<i>Pull Request</i>
            <code>"${{ github.event.pull_request.title }}"</code>
            ÑĞ¾Ğ·Ğ´Ğ°Ğ½Ğ½Ñ‹Ğ¹ ğŸ‘¤ <u><b>${{ github.event.pull_request.user.login }}</b></u>
            Ğ¸Ğ· Ğ²ĞµÑ‚ĞºĞ¸ <code>${{ github.head_ref }}</code> Ğ² Ğ²ĞµÑ‚ĞºÑƒ <code>${{ github.base_ref }}</code>.

            ğŸŸ¦ <a href="${{ github.event.pull_request.html_url }}">link...</a>
      - name: "Closed Pull Request"
        if: (github.event_name == 'pull_request' && github.event.action == 'closed' && github.event.pull_request.merged == false)
        uses: "appleboy/telegram-action@master"
        with:
          to: ${{ secrets.TELEGRAM_ID }}
          token: ${{ secrets.TELEGRAM_TOKEN }}
          format: HTML
          message: |
            âš«ï¸ <b>${{ github.repository }}</b> âš«ï¸

            ğŸ‘¤ <u><b>${{ github.actor }}</b></u> Ğ·Ğ°ĞºÑ€Ñ‹Ğ» <i>Pull Request</i> <u><b>Ğ±ĞµĞ· Ğ¼ĞµÑ€Ğ¶Ğ°!</b></u>
            <code>"${{ github.event.pull_request.title }}"</code>
            ÑĞ¾Ğ·Ğ´Ğ°Ğ½Ğ½Ñ‹Ğ¹ ğŸ‘¤ <u><b>${{ github.event.pull_request.user.login }}</b></u>
            Ğ¸Ğ· Ğ²ĞµÑ‚ĞºĞ¸ <code>${{ github.head_ref }}</code> Ğ² Ğ²ĞµÑ‚ĞºÑƒ <code>${{ github.base_ref }}</code>.

            ğŸŸ¦ <a href="${{ github.event.pull_request.html_url }}">link...</a>
      - name: "Reopened Pull Request"
        if: (github.event_name == 'pull_request' && github.event.action == 'reopened')
        uses: "appleboy/telegram-action@master"
        with:
          to: ${{ secrets.TELEGRAM_ID }}
          token: ${{ secrets.TELEGRAM_TOKEN }}
          format: HTML
          message: |
            âš«ï¸ <b>${{ github.repository }}</b> âš«ï¸

            ğŸ‘¤ <u><b>${{ github.actor }}</b></u> ÑĞ½Ğ¾Ğ²Ğ° Ğ¾Ñ‚ĞºÑ€Ñ‹Ğ» <i>Pull Request</i>
            <code>"${{ github.event.pull_request.title }}"</code>
            Ğ¸Ğ· Ğ²ĞµÑ‚ĞºĞ¸ <code>${{ github.head_ref }}</code> Ğ² Ğ²ĞµÑ‚ĞºÑƒ <code>${{ github.base_ref }}</code>.

            ğŸŸ¦ <a href="${{ github.event.pull_request.html_url }}">link...</a>

      # Issie Added
      - name: issue_comment
        if: (github.event_name == 'issue_comment')
        uses: "appleboy/telegram-action@master"
        with:
          to: ${{ secrets.TELEGRAM_ID }}
          token: ${{ secrets.TELEGRAM_TOKEN }}
          format: HTML
          message: |
            âš«ï¸ <b>${{ github.repository }}</b> âš«ï¸

            ğŸ‘¤ <u><b>${{ github.actor }}</b></u> Ğ´Ğ¾Ğ±Ğ°Ğ²Ğ¸Ğ» ĞºĞ¾Ğ¼ĞµĞ½Ñ‚Ğ°Ñ€Ğ¸Ğ¹ Ğº <i>Pull Request</i>
            <code>"${{ github.event.issue.title }}"</code>

            <i>${{ github.event.comment.body }}</i>

            ğŸŸ¦ <a href="${{ github.event.comment.html_url }}">link...</a>

      # Comment Added
      - name: pull_request_review
        if: (github.event_name == 'pull_request_review')
        uses: "appleboy/telegram-action@master"
        with:
          to: ${{ secrets.TELEGRAM_ID }}
          token: ${{ secrets.TELEGRAM_TOKEN }}
          format: HTML
          message: |
            âš«ï¸ <b>${{ github.repository }}</b> âš«ï¸

            ğŸ‘¤ <u><b>${{ github.actor }}</b></u> ÑĞ´ĞµĞ»Ğ°Ğ» Ñ€ĞµĞ²ÑŒÑ Ğ½Ğ° <i>Pull Request</i>
            <code>"${{ github.event.pull_request.title }}"</code>

            â—ï¸<b>Ğ¡Ñ‚Ğ°Ñ‚ÑƒÑ:</b> <u>${{ github.event.review.state }}</u>

            ğŸŸ¦ <a href="${{ github.event.review.html_url }}">link...</a>
